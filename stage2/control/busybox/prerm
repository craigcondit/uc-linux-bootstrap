#!/usr/share/busybox/libexec/sh
BUSYBOX=/usr/share/busybox/libexec/busybox

## Special handling for default shell:
##
## Remove /usr/bin/sh, but if there is no other alternative, put the link
## back. This fixes upgrades of the busybox package by ensuring that we
## have a shell to execute the postinst script on the new version.
##
## If the user simply uninstalls busybox and doesn't have a backup shell
## defined, then... PEBKAC ;-P

update-alternatives --quiet --remove sh ${BUSYBOX}
if [ ! -e /usr/bin/sh ]; then
  # uh oh, alternatives didn't put it back
  update-alternatives --quiet --install /usr/bin/sh sh ${BUSYBOX} 1
fi

## Nuke everything else

update-alternatives --quiet --remove '[' ${BUSYBOX}
update-alternatives --quiet --remove '[[' ${BUSYBOX}
update-alternatives --quiet --remove ar ${BUSYBOX}
update-alternatives --quiet --remove ash ${BUSYBOX}
update-alternatives --quiet --remove awk ${BUSYBOX}
update-alternatives --quiet --remove base64 ${BUSYBOX}
update-alternatives --quiet --remove basename ${BUSYBOX}
update-alternatives --quiet --remove beep ${BUSYBOX}
update-alternatives --quiet --remove bunzip2 ${BUSYBOX}
update-alternatives --quiet --remove bzcat ${BUSYBOX}
update-alternatives --quiet --remove bzip2 ${BUSYBOX}
update-alternatives --quiet --remove cal ${BUSYBOX}
update-alternatives --quiet --remove cat ${BUSYBOX}
update-alternatives --quiet --remove catv ${BUSYBOX}
update-alternatives --quiet --remove chattr ${BUSYBOX}
update-alternatives --quiet --remove chgrp ${BUSYBOX}
update-alternatives --quiet --remove chmod ${BUSYBOX}
update-alternatives --quiet --remove chown ${BUSYBOX}
update-alternatives --quiet --remove chpst ${BUSYBOX}
update-alternatives --quiet --remove chrt ${BUSYBOX}
update-alternatives --quiet --remove chvt ${BUSYBOX}
update-alternatives --quiet --remove cksum ${BUSYBOX}
update-alternatives --quiet --remove clear ${BUSYBOX}
update-alternatives --quiet --remove cmp ${BUSYBOX}
update-alternatives --quiet --remove comm ${BUSYBOX}
update-alternatives --quiet --remove conspy ${BUSYBOX}
update-alternatives --quiet --remove cp ${BUSYBOX}
update-alternatives --quiet --remove cpio ${BUSYBOX}
update-alternatives --quiet --remove crontab ${BUSYBOX}
update-alternatives --quiet --remove cryptpw ${BUSYBOX}
update-alternatives --quiet --remove cttyhack ${BUSYBOX}
update-alternatives --quiet --remove cut ${BUSYBOX}
update-alternatives --quiet --remove date ${BUSYBOX}
update-alternatives --quiet --remove dc ${BUSYBOX}
update-alternatives --quiet --remove dd ${BUSYBOX}
update-alternatives --quiet --remove deallocvt ${BUSYBOX}
update-alternatives --quiet --remove df ${BUSYBOX}
update-alternatives --quiet --remove diff ${BUSYBOX}
update-alternatives --quiet --remove dirname ${BUSYBOX}
update-alternatives --quiet --remove dmesg ${BUSYBOX}
update-alternatives --quiet --remove dnsdomainname ${BUSYBOX}
update-alternatives --quiet --remove dos2unix ${BUSYBOX}
update-alternatives --quiet --remove dpkg ${BUSYBOX}
update-alternatives --quiet --remove dpkg-deb ${BUSYBOX}
update-alternatives --quiet --remove du ${BUSYBOX}
update-alternatives --quiet --remove dumpkmap ${BUSYBOX}
update-alternatives --quiet --remove dumpleases ${BUSYBOX}
update-alternatives --quiet --remove echo ${BUSYBOX}
update-alternatives --quiet --remove ed ${BUSYBOX}
update-alternatives --quiet --remove egrep ${BUSYBOX}
update-alternatives --quiet --remove eject ${BUSYBOX}
update-alternatives --quiet --remove env ${BUSYBOX}
update-alternatives --quiet --remove envdir ${BUSYBOX}
update-alternatives --quiet --remove envuidgid ${BUSYBOX}
update-alternatives --quiet --remove expand ${BUSYBOX}
update-alternatives --quiet --remove expr ${BUSYBOX}
update-alternatives --quiet --remove false ${BUSYBOX}
update-alternatives --quiet --remove fatattr ${BUSYBOX}
update-alternatives --quiet --remove fdflush ${BUSYBOX}
update-alternatives --quiet --remove fgconsole ${BUSYBOX}
update-alternatives --quiet --remove fgrep ${BUSYBOX}
update-alternatives --quiet --remove find ${BUSYBOX}
update-alternatives --quiet --remove flock ${BUSYBOX}
update-alternatives --quiet --remove fold ${BUSYBOX}
update-alternatives --quiet --remove free ${BUSYBOX}
update-alternatives --quiet --remove fsync ${BUSYBOX}
update-alternatives --quiet --remove ftpget ${BUSYBOX}
update-alternatives --quiet --remove ftpput ${BUSYBOX}
update-alternatives --quiet --remove fuser ${BUSYBOX}
update-alternatives --quiet --remove getopt ${BUSYBOX}
update-alternatives --quiet --remove grep ${BUSYBOX}
update-alternatives --quiet --remove groups ${BUSYBOX}
update-alternatives --quiet --remove gunzip ${BUSYBOX}
update-alternatives --quiet --remove gzip ${BUSYBOX}
update-alternatives --quiet --remove hd ${BUSYBOX}
update-alternatives --quiet --remove head ${BUSYBOX}
update-alternatives --quiet --remove hexdump ${BUSYBOX}
update-alternatives --quiet --remove hostid ${BUSYBOX}
update-alternatives --quiet --remove hostname ${BUSYBOX}
update-alternatives --quiet --remove hush ${BUSYBOX}
update-alternatives --quiet --remove id ${BUSYBOX}
update-alternatives --quiet --remove remove ${BUSYBOX}
update-alternatives --quiet --remove ionice ${BUSYBOX}
update-alternatives --quiet --remove iostat ${BUSYBOX}
update-alternatives --quiet --remove ipcalc ${BUSYBOX}
update-alternatives --quiet --remove ipcrm ${BUSYBOX}
update-alternatives --quiet --remove ipcs ${BUSYBOX}
update-alternatives --quiet --remove kbd_mode ${BUSYBOX}
update-alternatives --quiet --remove kill ${BUSYBOX}
update-alternatives --quiet --remove killall ${BUSYBOX}
update-alternatives --quiet --remove last ${BUSYBOX}
update-alternatives --quiet --remove less ${BUSYBOX}
update-alternatives --quiet --remove linux32 ${BUSYBOX}
update-alternatives --quiet --remove linux64 ${BUSYBOX}
update-alternatives --quiet --remove ln ${BUSYBOX}
update-alternatives --quiet --remove logger ${BUSYBOX}
update-alternatives --quiet --remove login ${BUSYBOX}
update-alternatives --quiet --remove logname ${BUSYBOX}
update-alternatives --quiet --remove lpq ${BUSYBOX}
update-alternatives --quiet --remove lpr ${BUSYBOX}
update-alternatives --quiet --remove ls ${BUSYBOX}
update-alternatives --quiet --remove lsattr ${BUSYBOX}
update-alternatives --quiet --remove lsof ${BUSYBOX}
update-alternatives --quiet --remove lspci ${BUSYBOX}
update-alternatives --quiet --remove lsusb ${BUSYBOX}
update-alternatives --quiet --remove lzcat ${BUSYBOX}
update-alternatives --quiet --remove lzma ${BUSYBOX}
update-alternatives --quiet --remove lzop ${BUSYBOX}
update-alternatives --quiet --remove lzopcat ${BUSYBOX}
update-alternatives --quiet --remove makemime ${BUSYBOX}
update-alternatives --quiet --remove man ${BUSYBOX}
update-alternatives --quiet --remove md5sum ${BUSYBOX}
update-alternatives --quiet --remove mesg ${BUSYBOX}
update-alternatives --quiet --remove microcom ${BUSYBOX}
update-alternatives --quiet --remove mkdir ${BUSYBOX}
update-alternatives --quiet --remove mkfifo ${BUSYBOX}
update-alternatives --quiet --remove mknod ${BUSYBOX}
update-alternatives --quiet --remove mkpasswd ${BUSYBOX}
update-alternatives --quiet --remove mktemp ${BUSYBOX}
update-alternatives --quiet --remove more ${BUSYBOX}
update-alternatives --quiet --remove mount ${BUSYBOX}
update-alternatives --quiet --remove mountpoint ${BUSYBOX}
update-alternatives --quiet --remove mpstat ${BUSYBOX}
update-alternatives --quiet --remove mt ${BUSYBOX}
update-alternatives --quiet --remove mv ${BUSYBOX}
update-alternatives --quiet --remove nc ${BUSYBOX}
update-alternatives --quiet --remove netstat ${BUSYBOX}
update-alternatives --quiet --remove nice ${BUSYBOX}
update-alternatives --quiet --remove nmeter ${BUSYBOX}
update-alternatives --quiet --remove nohup ${BUSYBOX}
update-alternatives --quiet --remove nslookup ${BUSYBOX}
update-alternatives --quiet --remove od ${BUSYBOX}
update-alternatives --quiet --remove openvt ${BUSYBOX}
update-alternatives --quiet --remove passwd ${BUSYBOX}
update-alternatives --quiet --remove patch ${BUSYBOX}
update-alternatives --quiet --remove pgrep ${BUSYBOX}
update-alternatives --quiet --remove pidof ${BUSYBOX}
update-alternatives --quiet --remove ping ${BUSYBOX}
update-alternatives --quiet --remove ping6 ${BUSYBOX}
update-alternatives --quiet --remove pipe_progress ${BUSYBOX}
update-alternatives --quiet --remove pkill ${BUSYBOX}
update-alternatives --quiet --remove pmap ${BUSYBOX}
update-alternatives --quiet --remove printenv ${BUSYBOX}
update-alternatives --quiet --remove printf ${BUSYBOX}
update-alternatives --quiet --remove ps ${BUSYBOX}
update-alternatives --quiet --remove pscan ${BUSYBOX}
update-alternatives --quiet --remove pstree ${BUSYBOX}
update-alternatives --quiet --remove pwd ${BUSYBOX}
update-alternatives --quiet --remove pwdx ${BUSYBOX}
update-alternatives --quiet --remove readlink ${BUSYBOX}
update-alternatives --quiet --remove realpath ${BUSYBOX}
update-alternatives --quiet --remove reformime ${BUSYBOX}
update-alternatives --quiet --remove renice ${BUSYBOX}
update-alternatives --quiet --remove reset ${BUSYBOX}
update-alternatives --quiet --remove resize ${BUSYBOX}
update-alternatives --quiet --remove rev ${BUSYBOX}
update-alternatives --quiet --remove rm ${BUSYBOX}
update-alternatives --quiet --remove rmdir ${BUSYBOX}
update-alternatives --quiet --remove rpm ${BUSYBOX}
update-alternatives --quiet --remove rpm2cpio ${BUSYBOX}
update-alternatives --quiet --remove run-parts ${BUSYBOX}
update-alternatives --quiet --remove runsv ${BUSYBOX}
update-alternatives --quiet --remove runsvdir ${BUSYBOX}
update-alternatives --quiet --remove rx ${BUSYBOX}
update-alternatives --quiet --remove script ${BUSYBOX}
update-alternatives --quiet --remove scriptreplay ${BUSYBOX}
update-alternatives --quiet --remove sed ${BUSYBOX}
update-alternatives --quiet --remove seq ${BUSYBOX}
update-alternatives --quiet --remove setarch ${BUSYBOX}
update-alternatives --quiet --remove setkeycodes ${BUSYBOX}
update-alternatives --quiet --remove setserial ${BUSYBOX}
update-alternatives --quiet --remove setsid ${BUSYBOX}
update-alternatives --quiet --remove setuidgid ${BUSYBOX}
update-alternatives --quiet --remove sha1sum ${BUSYBOX}
update-alternatives --quiet --remove sha256sum ${BUSYBOX}
update-alternatives --quiet --remove sha3sum ${BUSYBOX}
update-alternatives --quiet --remove sha512sum ${BUSYBOX}
update-alternatives --quiet --remove showkey ${BUSYBOX}
update-alternatives --quiet --remove shuf ${BUSYBOX}
update-alternatives --quiet --remove sleep ${BUSYBOX}
update-alternatives --quiet --remove smemcap ${BUSYBOX}
update-alternatives --quiet --remove softlimit ${BUSYBOX}
update-alternatives --quiet --remove sort ${BUSYBOX}
update-alternatives --quiet --remove split ${BUSYBOX}
update-alternatives --quiet --remove stat ${BUSYBOX}
update-alternatives --quiet --remove strings ${BUSYBOX}
update-alternatives --quiet --remove stty ${BUSYBOX}
update-alternatives --quiet --remove su ${BUSYBOX}
update-alternatives --quiet --remove sum ${BUSYBOX}
update-alternatives --quiet --remove sv ${BUSYBOX}
update-alternatives --quiet --remove sync ${BUSYBOX}
update-alternatives --quiet --remove tac ${BUSYBOX}
update-alternatives --quiet --remove tail ${BUSYBOX}
update-alternatives --quiet --remove tar ${BUSYBOX}
update-alternatives --quiet --remove tcpsvd ${BUSYBOX}
update-alternatives --quiet --remove tee ${BUSYBOX}
update-alternatives --quiet --remove telnet ${BUSYBOX}
update-alternatives --quiet --remove test ${BUSYBOX}
update-alternatives --quiet --remove tftp ${BUSYBOX}
update-alternatives --quiet --remove time ${BUSYBOX}
update-alternatives --quiet --remove timeout ${BUSYBOX}
update-alternatives --quiet --remove top ${BUSYBOX}
update-alternatives --quiet --remove touch ${BUSYBOX}
update-alternatives --quiet --remove tr ${BUSYBOX}
update-alternatives --quiet --remove traceroute ${BUSYBOX}
update-alternatives --quiet --remove traceroute6 ${BUSYBOX}
update-alternatives --quiet --remove true ${BUSYBOX}
update-alternatives --quiet --remove tty ${BUSYBOX}
update-alternatives --quiet --remove ttysize ${BUSYBOX}
update-alternatives --quiet --remove udpsvd ${BUSYBOX}
update-alternatives --quiet --remove umount ${BUSYBOX}
update-alternatives --quiet --remove uname ${BUSYBOX}
update-alternatives --quiet --remove unexpand ${BUSYBOX}
update-alternatives --quiet --remove uniq ${BUSYBOX}
update-alternatives --quiet --remove unix2dos ${BUSYBOX}
update-alternatives --quiet --remove unlink ${BUSYBOX}
update-alternatives --quiet --remove unlzma ${BUSYBOX}
update-alternatives --quiet --remove unlzop ${BUSYBOX}
update-alternatives --quiet --remove unxz ${BUSYBOX}
update-alternatives --quiet --remove unzip ${BUSYBOX}
update-alternatives --quiet --remove uptime ${BUSYBOX}
update-alternatives --quiet --remove users ${BUSYBOX}
update-alternatives --quiet --remove usleep ${BUSYBOX}
update-alternatives --quiet --remove uudecode ${BUSYBOX}
update-alternatives --quiet --remove uuencode ${BUSYBOX}
update-alternatives --quiet --remove vi ${BUSYBOX}
update-alternatives --quiet --remove vlock ${BUSYBOX}
update-alternatives --quiet --remove volname ${BUSYBOX}
update-alternatives --quiet --remove wall ${BUSYBOX}
update-alternatives --quiet --remove watch ${BUSYBOX}
update-alternatives --quiet --remove wc ${BUSYBOX}
update-alternatives --quiet --remove wget ${BUSYBOX}
update-alternatives --quiet --remove which ${BUSYBOX}
update-alternatives --quiet --remove who ${BUSYBOX}
update-alternatives --quiet --remove whoami ${BUSYBOX}
update-alternatives --quiet --remove whois ${BUSYBOX}
update-alternatives --quiet --remove xargs ${BUSYBOX}
update-alternatives --quiet --remove xz ${BUSYBOX}
update-alternatives --quiet --remove xzcat ${BUSYBOX}
update-alternatives --quiet --remove yes ${BUSYBOX}
update-alternatives --quiet --remove zcat ${BUSYBOX}
update-alternatives --quiet --remove acpid ${BUSYBOX}
update-alternatives --quiet --remove addgroup ${BUSYBOX}
update-alternatives --quiet --remove add-shell ${BUSYBOX}
update-alternatives --quiet --remove adduser ${BUSYBOX}
update-alternatives --quiet --remove adjtimex ${BUSYBOX}
update-alternatives --quiet --remove arp ${BUSYBOX}
update-alternatives --quiet --remove arping ${BUSYBOX}
update-alternatives --quiet --remove blkid ${BUSYBOX}
update-alternatives --quiet --remove blockdev ${BUSYBOX}
update-alternatives --quiet --remove bootchartd ${BUSYBOX}
update-alternatives --quiet --remove brctl ${BUSYBOX}
update-alternatives --quiet --remove chat ${BUSYBOX}
update-alternatives --quiet --remove chpasswd ${BUSYBOX}
update-alternatives --quiet --remove chroot ${BUSYBOX}
update-alternatives --quiet --remove crond ${BUSYBOX}
update-alternatives --quiet --remove delgroup ${BUSYBOX}
update-alternatives --quiet --remove deluser ${BUSYBOX}
update-alternatives --quiet --remove depmod ${BUSYBOX}
update-alternatives --quiet --remove devmem ${BUSYBOX}
update-alternatives --quiet --remove dhcprelay ${BUSYBOX}
update-alternatives --quiet --remove dnsd ${BUSYBOX}
update-alternatives --quiet --remove ether-wake ${BUSYBOX}
update-alternatives --quiet --remove fakeidentd ${BUSYBOX}
update-alternatives --quiet --remove fbset ${BUSYBOX}
update-alternatives --quiet --remove fbsplash ${BUSYBOX}
update-alternatives --quiet --remove fdformat ${BUSYBOX}
update-alternatives --quiet --remove fdisk ${BUSYBOX}
update-alternatives --quiet --remove findfs ${BUSYBOX}
update-alternatives --quiet --remove freeramdisk ${BUSYBOX}
update-alternatives --quiet --remove fsck ${BUSYBOX}
update-alternatives --quiet --remove fsck.minix ${BUSYBOX}
update-alternatives --quiet --remove fstrim ${BUSYBOX}
update-alternatives --quiet --remove ftpd ${BUSYBOX}
update-alternatives --quiet --remove getty ${BUSYBOX}
update-alternatives --quiet --remove halt ${BUSYBOX}
update-alternatives --quiet --remove hdparm ${BUSYBOX}
update-alternatives --quiet --remove httpd ${BUSYBOX}
update-alternatives --quiet --remove hwclock ${BUSYBOX}
update-alternatives --quiet --remove ifconfig ${BUSYBOX}
update-alternatives --quiet --remove ifdown ${BUSYBOX}
update-alternatives --quiet --remove ifenslave ${BUSYBOX}
update-alternatives --quiet --remove ifplugd ${BUSYBOX}
update-alternatives --quiet --remove ifup ${BUSYBOX}
update-alternatives --quiet --remove inetd ${BUSYBOX}
update-alternatives --quiet --remove init ${BUSYBOX}
update-alternatives --quiet --remove insmod ${BUSYBOX}
update-alternatives --quiet --remove ip ${BUSYBOX}
update-alternatives --quiet --remove ipaddr ${BUSYBOX}
update-alternatives --quiet --remove iplink ${BUSYBOX}
update-alternatives --quiet --remove iproute ${BUSYBOX}
update-alternatives --quiet --remove iprule ${BUSYBOX}
update-alternatives --quiet --remove iptunnel ${BUSYBOX}
update-alternatives --quiet --remove killall5 ${BUSYBOX}
update-alternatives --quiet --remove klogd ${BUSYBOX}
update-alternatives --quiet --remove loadfont ${BUSYBOX}
update-alternatives --quiet --remove loadkmap ${BUSYBOX}
update-alternatives --quiet --remove logread ${BUSYBOX}
update-alternatives --quiet --remove losetup ${BUSYBOX}
update-alternatives --quiet --remove lpd ${BUSYBOX}
update-alternatives --quiet --remove lsmod ${BUSYBOX}
update-alternatives --quiet --remove makedevs ${BUSYBOX}
update-alternatives --quiet --remove mdev ${BUSYBOX}
update-alternatives --quiet --remove mkdosfs ${BUSYBOX}
update-alternatives --quiet --remove mke2fs ${BUSYBOX}
update-alternatives --quiet --remove mkfs.ext2 ${BUSYBOX}
update-alternatives --quiet --remove mkfs.minix ${BUSYBOX}
update-alternatives --quiet --remove mkfs.vfat ${BUSYBOX}
update-alternatives --quiet --remove mkswap ${BUSYBOX}
update-alternatives --quiet --remove modinfo ${BUSYBOX}
update-alternatives --quiet --remove modprobe ${BUSYBOX}
update-alternatives --quiet --remove nameif ${BUSYBOX}
update-alternatives --quiet --remove nanddump ${BUSYBOX}
update-alternatives --quiet --remove nandwrite ${BUSYBOX}
update-alternatives --quiet --remove nbd-client ${BUSYBOX}
update-alternatives --quiet --remove ntpd ${BUSYBOX}
update-alternatives --quiet --remove pivot_root ${BUSYBOX}
update-alternatives --quiet --remove popmaildir ${BUSYBOX}
update-alternatives --quiet --remove poweroff ${BUSYBOX}
update-alternatives --quiet --remove powertop ${BUSYBOX}
update-alternatives --quiet --remove raidautorun ${BUSYBOX}
update-alternatives --quiet --remove rdate ${BUSYBOX}
update-alternatives --quiet --remove rdev ${BUSYBOX}
update-alternatives --quiet --remove readahead ${BUSYBOX}
update-alternatives --quiet --remove readprofile ${BUSYBOX}
update-alternatives --quiet --remove reboot ${BUSYBOX}
update-alternatives --quiet --remove remove-shell ${BUSYBOX}
update-alternatives --quiet --remove rmmod ${BUSYBOX}
update-alternatives --quiet --remove route ${BUSYBOX}
update-alternatives --quiet --remove rtcwake ${BUSYBOX}
update-alternatives --quiet --remove runlevel ${BUSYBOX}
update-alternatives --quiet --remove sendmail ${BUSYBOX}
update-alternatives --quiet --remove setconsole ${BUSYBOX}
update-alternatives --quiet --remove setfont ${BUSYBOX}
update-alternatives --quiet --remove setlogcons ${BUSYBOX}
update-alternatives --quiet --remove slattach ${BUSYBOX}
update-alternatives --quiet --remove start-stop-daemon ${BUSYBOX}
update-alternatives --quiet --remove sulogin ${BUSYBOX}
update-alternatives --quiet --remove svlogd ${BUSYBOX}
update-alternatives --quiet --remove swapoff ${BUSYBOX}
update-alternatives --quiet --remove swapon ${BUSYBOX}
update-alternatives --quiet --remove switch_root ${BUSYBOX}
update-alternatives --quiet --remove sysctl ${BUSYBOX}
update-alternatives --quiet --remove syslogd ${BUSYBOX}
update-alternatives --quiet --remove telnetd ${BUSYBOX}
update-alternatives --quiet --remove tftpd ${BUSYBOX}
update-alternatives --quiet --remove tunctl ${BUSYBOX}
update-alternatives --quiet --remove ubiattach ${BUSYBOX}
update-alternatives --quiet --remove ubidetach ${BUSYBOX}
update-alternatives --quiet --remove ubimkvol ${BUSYBOX}
update-alternatives --quiet --remove ubirmvol ${BUSYBOX}
update-alternatives --quiet --remove ubirsvol ${BUSYBOX}
update-alternatives --quiet --remove ubiupdatevol ${BUSYBOX}
update-alternatives --quiet --remove udhcpc ${BUSYBOX}
update-alternatives --quiet --remove udhcpd ${BUSYBOX}
update-alternatives --quiet --remove vconfig ${BUSYBOX}
update-alternatives --quiet --remove watchdog ${BUSYBOX}
update-alternatives --quiet --remove zcip ${BUSYBOX}
